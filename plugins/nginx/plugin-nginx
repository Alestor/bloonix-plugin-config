{
   "plugin" : {
      "info" : {
         "flags" : "",
         "plugin" : "check-nginx",
         "version" : "0.4",
         "examples" : [
            {
               "arguments" : [
                  "url",
                  "http://localhost/nginx_status",
                  "warning",
                  "connections:ge:200",
                  "critical",
                  "connections:ge:300"
               ],
               "command_line" : "check-nginx --url 'http://localhost/nginx_status' --warning 'connections:ge:200' --critical 'connections:ge:300'",
               "description" : [
                  "Simple example:",
                  "",
                  "- trigger a WARNING if connections higher than 200",
                  "- trigger a CRITICAL if connections higher than 300"
               ]
            }
         ],
         "options" : [
            {
               "value_desc" : "url",
               "description" : "This is the URL to call the server-status of Apache. Please enter the full URL with the query string.",
               "default" : "http://localhost/nginx_status",
               "name" : "URL",
               "value_type" : "string",
               "multiple" : 0,
               "option" : "url",
               "mandatory" : 1
            },
            {
               "name" : "Timeout",
               "value_desc" : "seconds",
               "default" : 10,
               "description" : "A timeout in seconds after its expiration the check is aborted and a critical status is triggered.",
               "option" : "timeout",
               "mandatory" : 0,
               "value_type" : "number",
               "multiple" : 0
            },
            {
               "value_desc" : "key:value or key:op:value",
               "description" : "This is the warning threshold. When the value exceeds the threshold a warning status is triggered. Please see the examples for more information.",
               "default" : null,
               "name" : "Warning threshold",
               "value_type" : "string",
               "multiple" : 1,
               "option" : "warning",
               "mandatory" : 0
            },
            {
               "option" : "critical",
               "mandatory" : 0,
               "multiple" : 1,
               "value_type" : "string",
               "name" : "Critical threshold",
               "value_desc" : "key:value or key:op:value",
               "description" : "This is the critical threshold. When the value exceeds the threshold a critical status is triggered. Please see the examples for more information.",
               "default" : null
            },
            {
               "mandatory" : 0,
               "option" : "username",
               "value_type" : "string",
               "multiple" : 0,
               "name" : "Username",
               "default" : null,
               "description" : "A username for a HTTP Auth-Basic authentication.",
               "value_desc" : "username"
            },
            {
               "name" : "Password",
               "value_desc" : "password",
               "default" : null,
               "description" : "A password for a HTTP Auth-Basic authentication.",
               "option" : "password",
               "mandatory" : 0,
               "value_type" : "string",
               "multiple" : 0
            },
            {
               "mandatory" : 0,
               "option" : "host",
               "value_type" : "string",
               "multiple" : 0,
               "name" : "Hostname or IP address",
               "description" : "A hostname or IP address to connect to.",
               "default" : null,
               "value_desc" : "hostname or ip address"
            },
            {
               "mandatory" : 0,
               "name" : "Use IPv6",
               "option" : "use-ipv6",
               "description" : "Use IPv6 to connect to the host.",
               "default" : null,
               "value_type" : 0,
               "multiple" : 0
            }
         ],
         "thresholds" : {
            "info" : [
               "How to set warning and critical thresholds:\n\n",
               "  It's possible to set thresholds for one or more statistic keys.\n",
               "  The format to add a threshold for a statistic key is:\n\n",
               "    key:operator:threshold\n\n",
               "  If no operator is set then the default operator is 'ge'.\n\n",
               "  The following operators are available:\n\n",
               "    lt = less than\n",
               "    le = less than or equal\n",
               "    gt = greater than\n",
               "    ge = greater than or equal\n",
               "    eq = equal\n",
               "    ne = not equal\n"
            ],
            "options" : [
               {
                  "unit" : "none",
                  "key" : "connections"
               },
               {
                  "unit" : "none",
                  "key" : "accepts"
               },
               {
                  "key" : "requests",
                  "unit" : "none"
               },
               {
                  "key" : "reading",
                  "unit" : "none"
               },
               {
                  "unit" : "none",
                  "key" : "writing"
               },
               {
                  "unit" : "none",
                  "key" : "waiting"
               }
            ]
         }
      },
      "plugin" : "Nginx.Check",
      "command" : "check-nginx",
      "abstract" : "Nginx server status",
      "datatype" : "statistic",
      "id" : "44",
      "netaccess" : "yes",
      "description" : "Nginx statistics",
      "prefer" : "localhost",
      "category" : "System,Webserver,Nginx"
   },
   "chart" : [
      {
         "id" : "1",
         "title" : "Nginx - worker connection status",
         "options" : {
            "units" : "null",
            "ylabel" : "count",
            "chart-type" : "area",
            "series" : [
               {
                  "color" : "#ffdc00",
                  "name" : "reading"
               },
               {
                  "color" : "#ff9c00",
                  "name" : "writing"
               },
               {
                  "color" : "#ff5c00",
                  "name" : "waiting"
               }
            ]
         }
      },
      {
         "title" : "Nginx - connections/s",
         "options" : {
            "series" : [
               {
                  "color" : "#005467",
                  "name" : "handled"
               },
               {
                  "color" : "#ff7a0d",
                  "name" : "accepts"
               }
            ],
            "chart-type" : "area",
            "ylabel" : "connections/s",
            "units" : "null"
         },
         "id" : "2"
      },
      {
         "id" : "3",
         "options" : {
            "series" : {
               "color" : "#005467",
               "name" : "requests"
            },
            "ylabel" : "requests/s",
            "chart-type" : "area",
            "units" : "null"
         },
         "title" : "Nginx - requests/s"
      }
   ],
   "statistic" : [
      {
         "datatype" : "bigint",
         "alias" : "Connections",
         "statkey" : "connections",
         "description" : "Number of all open connections including connections to backends."
      },
      {
         "datatype" : "float",
         "alias" : "Accepted",
         "description" : "Accepted connections per second.",
         "statkey" : "accepts"
      },
      {
         "datatype" : "float",
         "alias" : "Handled connections",
         "description" : "Handled connections per seconds.",
         "statkey" : "handled"
      },
      {
         "statkey" : "requests",
         "description" : "Handled requests per second.",
         "alias" : "Requests",
         "datatype" : "float"
      },
      {
         "datatype" : "bigint",
         "alias" : "Reading",
         "statkey" : "reading",
         "description" : "Current worker that reads request header."
      },
      {
         "datatype" : "bigint",
         "alias" : "Writing",
         "description" : "Current worker that reads request body, processes request, or writes response to a client.",
         "statkey" : "writing"
      },
      {
         "datatype" : "bigint",
         "alias" : "Waiting",
         "statkey" : "waiting",
         "description" : "Current worker in keep alive status."
      }
   ]
}
