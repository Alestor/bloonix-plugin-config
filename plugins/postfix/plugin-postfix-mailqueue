{
   "plugin" : {
      "id" : "47",
      "category" : "System,Mail",
      "datatype" : "statistic",
      "plugin" : "Postfix.Mailqueue",
      "description" : "Check the mailqueue of Postfix.",
      "command" : "check-postfix-mailqueue",
      "abstract" : "Postfix mailqueue check",
      "info" : {
         "info" : [
            "The spooldir of postfix is determined by",
            "  postconf -h queue_directory"
         ],
         "flags" : "sudo",
         "version" : "0.4",
         "options" : [
            {
               "multiple" : 1,
               "description" : "This is the warning threshold. When the value exceeds the threshold a warning status is triggered. Please see the examples for more information.",
               "default" : null,
               "mandatory" : 0,
               "option" : "warning",
               "value_desc" : "key:value or key:op:value",
               "value_type" : "string",
               "name" : "Warning threshold"
            },
            {
               "value_desc" : "key:value or key:op:value",
               "option" : "critical",
               "mandatory" : 0,
               "default" : null,
               "description" : "This is the critical threshold. When the value exceeds the threshold a critical status is triggered. Please see the examples for more information.",
               "multiple" : 1,
               "name" : "Critical threshold",
               "value_type" : "string"
            }
         ],
         "plugin" : "check-postfix-mailqueue",
         "thresholds" : {
            "info" : [
               "How to set warning and critical thresholds:\n\n",
               "  It's possible to set thresholds for one or more statistic keys.\n",
               "  The format to add a threshold for a statistic key is:\n\n",
               "    key:operator:threshold\n\n",
               "  If no operator is set then the default operator is 'ge'.\n\n",
               "  The following operators are available:\n\n",
               "    lt = less than\n",
               "    le = less than or equal\n",
               "    gt = greater than\n",
               "    ge = greater than or equal\n",
               "    eq = equal\n",
               "    ne = not equal\n"
            ],
            "options" : [
               {
                  "unit" : "none",
                  "key" : "total"
               },
               {
                  "unit" : "none",
                  "key" : "incoming"
               },
               {
                  "key" : "active",
                  "unit" : "none"
               },
               {
                  "unit" : "none",
                  "key" : "deferred"
               },
               {
                  "key" : "corrupt",
                  "unit" : "none"
               },
               {
                  "key" : "hold",
                  "unit" : "none"
               }
            ]
         },
         "examples" : [
            {
               "description" : [
                  "Check if the queue 'active' or 'deferred' has more than 5000/10000 mails and return a WARNING or CRITICAL"
               ],
               "command_line" : "check-postfix-mailqueue --warning 'active:5000' --critical 'active:10000' --warning 'deferred:5000' --critical 'deferred:10000'",
               "arguments" : [
                  "warning",
                  "active:5000",
                  "critical",
                  "active:10000",
                  "warning",
                  "deferred:5000",
                  "critical",
                  "deferred:10000"
               ]
            }
         ]
      }
   },
   "statistic" : [
      {
         "description" : "Number of total mails in queue.",
         "datatype" : "bigint",
         "alias" : "Total",
         "statkey" : "total"
      },
      {
         "description" : "Number of mails in queue 'incoming'.",
         "datatype" : "bigint",
         "statkey" : "incoming",
         "alias" : "Incoming"
      },
      {
         "datatype" : "bigint",
         "alias" : "Active",
         "statkey" : "active",
         "description" : "Number of mails in queue 'active'."
      },
      {
         "description" : "Number of mails in queue 'deferred'.",
         "datatype" : "bigint",
         "alias" : "Deferred",
         "statkey" : "deferred"
      },
      {
         "statkey" : "corrupt",
         "alias" : "Corrupt",
         "datatype" : "bigint",
         "description" : "Number of mails in queue 'corrupt'."
      },
      {
         "description" : "Number of mails in queue 'hold'.",
         "statkey" : "hold",
         "alias" : "Hold",
         "datatype" : "bigint"
      }
   ],
   "chart" : {
      "title" : "Postfix mailqueue",
      "options" : {
         "units" : "null",
         "ylabel" : "count",
         "series" : [
            {
               "color" : "#e9644a",
               "name" : "incoming"
            },
            {
               "color" : "#ffb244",
               "name" : "active"
            },
            {
               "name" : "deferred",
               "color" : "#9a72ad"
            },
            {
               "color" : "#005467",
               "name" : "corrupt"
            },
            {
               "name" : "hold",
               "color" : "#2ba743"
            }
         ],
         "chart-type" : "area"
      },
      "id" : "1"
   }
}
